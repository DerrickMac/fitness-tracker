<div class="table-responsive">
  {% set grouped_workouts = {} %}
  {% for workout in workouts %}
      {% set _ = grouped_workouts.setdefault(workout.date, []).append(workout) %}
  {% endfor %}

  {% for date, workouts_on_date in grouped_workouts.items() %}
      <table class="table table-striped table-hover border">
        <thead class="table-dark">
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Weight</th>
            <th scope="col">Reps</th>
            <th scope="col">Distance</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <h2 class="mt-4">{{ moment(date, local=True).format('dddd') }}, {{ moment(date, local=True).format('l') }}</h2> 
        <tbody>
          {% for workout in workouts_on_date %}
          <tr>
            <td>{{ workout.exercises[0].name }}</td>
            <td>{{ workout.exercises[0].weight ~ ' lbs' if workout.exercises[0].weight is not none else '' }}</td>
            <td>{{ workout.exercises[0].reps or "" }}</td>
            <td>{{ workout.exercises[0].distance ~ ' mi' if workout.exercises[0].distance is not none else '' }}</td>
            <td>
              <a
                href="{{ url_for('edit_workout', workout_id=workout.id) }}"
                class="btn btn-primary btn-sm"
              >
                Edit
              </a>
              <a
                href="{{ url_for('delete_workout', workout_id=workout.id) }}"
                class="btn btn-danger btn-sm"
              >
                Delete
              </a>
            </td>
          </tr>
          {% endfor %} {% endfor %}
        </tbody>
      </table>
</div>
